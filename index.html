<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to R</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.7/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/hygge.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to R
## Import and Clean Data in R

---





## Welcome!

This tutorial will demonstrate how to get started in R and R Studio

To follow along with the workshop in R, you will need to have **already installed** R and R Studio

---

## How to follow along and participate

* Open R Studio

* Install the `tidyverse`, `rmarkdown`, `haven`, and `here` packages (if you haven't already)

    + Use the `Tools` menu and choose the `Install packages...` menu choice 

    + Type the names of the packages, `tidyverse, rmarkdown`, in the dialog box that opens and click Install

* Open the workshop R Markdown file and click on the **tiny** green arrow on the top right corner of the gray shaded area (this is a code chunk!) that contains this: 


```r
library(package = "here")
library(package = "tidyverse")
library(package = "haven")
```

* The arrow will run all the code in that "chunk" of code

* Throughout the workshop you will be able to run the code from the demonstration by clicking the arrow on the top right in the corresponding code chunk

* In between code chunks, you can type as you would in a Word document if you'd like to take notes

* For the exercises you may have to finish the code yourself and then click the arrow to get the anticipated result

---

## Why are we doing this?

* R is open source and free 

* R can do everything that SPSS and SAS can do 

* R is especially great for data visualization 

* The R community is supportive and active 

---

## The data set

* We will be using the **Global Attitudes &amp; Trends** data set from the **Pew Internet &amp; American Life** website 

    + If needed, download the data and documentation from this website: &lt;a href = "https://www.pewresearch.org/global/datasets/"&gt;https://www.pewresearch.org/global/datasets/&lt;/a&gt;
    
---

## Importing data into R

* Before running this code, make sure the participant file and the data file are saved in the same folder on your computer


```r
# use here so that R looks in the same folder you are in
here()
```

```
[1] "/Users/harrisj/Box/service/ACADEMIC-HIVE/AH-part1"
```

```r
# use read_sav function to read the spss file 
globalData2019 &lt;- read_spss(file = "Pew Research Center Global Attitudes Spring 2019 Dataset WEB.sav")
```

---

## Examining the data set 

* After importing the data you should see **globalData2019** in your **Environment** tab 

* Next to the name you gave to the data, **globalData2019**, you will see 38426 obs. of 607 variables 

    + This means there are 38426 observations, which in this case are the survey participants 
    
    + It also means there are 607 variables 
    
* The codebook for these data describe the 607 variables

* Click one time on the name of the data **globalData2019**, and it will pop-up in a data viewer tab in the **Console** pane

---

## Choosing some variables and observations to examine 

* Making a smaller dataset is often useful if there is a subset of people you are interested in, or even just to make the data easier to easily view

* For this workshop, we will choose:

    + 7 variables: SEX, AGE, BETTER_GENDER, COUNTRY_SATIS, ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY
    
    + Observations from Nigeria (country 21)

---

count: false
 
## Selecting variables and filtering observations
.panel1-small_data-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-small_data-auto[

]

---
count: false
 
## Selecting variables and filtering observations
.panel1-small_data-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-small_data-auto[

]

---
count: false
 
## Selecting variables and filtering observations
.panel1-small_data-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-small_data-auto[

]

---
count: false
 
## Selecting variables and filtering observations
.panel1-small_data-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-small_data-auto[

]

&lt;style&gt;
.panel1-small_data-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-small_data-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-small_data-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Examining the smaller data set


```r
summary(object = globalData2019clean)
```

```
      SEX             AGE        BETTER_GENDER   COUNTRY_SATIS  
 Min.   :1.000   Min.   :18.00   Min.   :1.000   Min.   :1.000  
 1st Qu.:1.000   1st Qu.:23.50   1st Qu.:1.000   1st Qu.:2.000  
 Median :1.000   Median :30.00   Median :2.000   Median :2.000  
 Mean   :1.425   Mean   :32.38   Mean   :2.033   Mean   :1.847  
 3rd Qu.:2.000   3rd Qu.:38.00   3rd Qu.:3.000   3rd Qu.:2.000  
 Max.   :2.000   Max.   :98.00   Max.   :8.000   Max.   :9.000  
    ECON_SIT      BELIEVE_GOD    GLOBAL_COMMUNITY
 Min.   :1.000   Min.   :1.000   Min.   :1.000   
 1st Qu.:2.000   1st Qu.:2.000   1st Qu.:1.000   
 Median :3.000   Median :2.000   Median :1.000   
 Mean   :3.077   Mean   :1.957   Mean   :1.625   
 3rd Qu.:4.000   3rd Qu.:2.000   3rd Qu.:2.000   
 Max.   :9.000   Max.   :8.000   Max.   :8.000   
```

---

## Planning data cleaning 

* All of these variables except `AGE` should be categorical, which is a **factor** data type in R 

* The way the variables are shown in the `summary()` indicates R thinks they are **numeric** data type 

* Most of these variables also have categories or responses like **Don't know** or **Refused** that are probably not useful for analysis 

* Data cleaning should include: 

    + Changing the categorical variables into the factor type 
    
    + Recoding the responses like **Don't know** or **Refused** to be `NA` in R
    
        + `NA` stands for **Not Available** in R and is how a missing value is recorded 

---

count: false
 
## Changing data types 1
.panel1-data_types-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-data_types-auto[

]

---
count: false
 
## Changing data types 1
.panel1-data_types-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-data_types-auto[

]

---
count: false
 
## Changing data types 1
.panel1-data_types-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-data_types-auto[

]

---
count: false
 
## Changing data types 1
.panel1-data_types-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
* zap_labels()
```
]
 
.panel2-data_types-auto[

]

---
count: false
 
## Changing data types 1
.panel1-data_types-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
* mutate(SEX = recode_factor(SEX,
*                            '1' = 'Male',
*                            '2' = 'Female'))
```
]
 
.panel2-data_types-auto[

]

&lt;style&gt;
.panel1-data_types-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-data_types-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-data_types-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Checking your work 1


```r
summary(object = globalData2019clean)
```

```
     SEX           AGE        BETTER_GENDER   COUNTRY_SATIS      ECON_SIT    
 Male  :572   Min.   :18.00   Min.   :1.000   Min.   :1.000   Min.   :1.000  
 Female:423   1st Qu.:23.50   1st Qu.:1.000   1st Qu.:2.000   1st Qu.:2.000  
              Median :30.00   Median :2.000   Median :2.000   Median :3.000  
              Mean   :32.38   Mean   :2.033   Mean   :1.847   Mean   :3.077  
              3rd Qu.:38.00   3rd Qu.:3.000   3rd Qu.:2.000   3rd Qu.:4.000  
              Max.   :98.00   Max.   :8.000   Max.   :9.000   Max.   :9.000  
  BELIEVE_GOD    GLOBAL_COMMUNITY
 Min.   :1.000   Min.   :1.000   
 1st Qu.:2.000   1st Qu.:1.000   
 Median :2.000   Median :1.000   
 Mean   :1.957   Mean   :1.625   
 3rd Qu.:2.000   3rd Qu.:2.000   
 Max.   :8.000   Max.   :8.000   
```

---

count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-data_types2-auto[

]

---
count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-data_types2-auto[

]

---
count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-data_types2-auto[

]

---
count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
* zap_labels()
```
]
 
.panel2-data_types2-auto[

]

---
count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
* mutate(SEX = recode_factor(SEX,
*                            '1' = 'Male',
*                            '2' = 'Female'))
```
]
 
.panel2-data_types2-auto[

]

---
count: false
 
## Changing data types 2
.panel1-data_types2-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
* mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
*                                      '1' = 'Men',
*                                      '2' = 'Women',
*                                      '3' = 'Same/both equally',
*                                      '8' = NA_character_,
*                                      '9' = NA_character_))
```
]
 
.panel2-data_types2-auto[

]

&lt;style&gt;
.panel1-data_types2-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-data_types2-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-data_types2-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Checking your work 2


```r
summary(object = globalData2019clean)
```

```
     SEX           AGE                  BETTER_GENDER COUNTRY_SATIS  
 Male  :572   Min.   :18.00   Men              :448   Min.   :1.000  
 Female:423   1st Qu.:23.50   Women            :231   1st Qu.:2.000  
              Median :30.00   Same/both equally:283   Median :2.000  
              Mean   :32.38   NA's             : 33   Mean   :1.847  
              3rd Qu.:38.00                           3rd Qu.:2.000  
              Max.   :98.00                           Max.   :9.000  
    ECON_SIT      BELIEVE_GOD    GLOBAL_COMMUNITY
 Min.   :1.000   Min.   :1.000   Min.   :1.000   
 1st Qu.:2.000   1st Qu.:2.000   1st Qu.:1.000   
 Median :3.000   Median :2.000   Median :1.000   
 Mean   :3.077   Mean   :1.957   Mean   :1.625   
 3rd Qu.:4.000   3rd Qu.:2.000   3rd Qu.:2.000   
 Max.   :9.000   Max.   :8.000   Max.   :8.000   
```

---

count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
* zap_labels()
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
* mutate(SEX = recode_factor(SEX,
*                            '1' = 'Male',
*                            '2' = 'Female'))
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
* mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
*                                   '1' = 'Men',
*                                   '2' = 'Women',
*                                   '3' = 'Same/both equally',
*                                   '8' = NA_character_,
*                                   '9' = NA_character_))
```
]
 
.panel2-data_types3-auto[

]

---
count: false
 
## Changing data types 3
.panel1-data_types3-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
* mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
*                                      '1' = 'Satisfied',
*                                      '2' = 'Dissatisfied',
*                                      '8' = NA_character_,
*                                      '9' = NA_character_))
```
]
 
.panel2-data_types3-auto[

]

&lt;style&gt;
.panel1-data_types3-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-data_types3-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-data_types3-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Checking your work 3


```r
summary(object = globalData2019clean)
```

```
     SEX           AGE                  BETTER_GENDER      COUNTRY_SATIS
 Male  :572   Min.   :18.00   Men              :448   Satisfied   :189  
 Female:423   1st Qu.:23.50   Women            :231   Dissatisfied:800  
              Median :30.00   Same/both equally:283   NA's        :  6  
              Mean   :32.38   NA's             : 33                     
              3rd Qu.:38.00                                             
              Max.   :98.00                                             
    ECON_SIT      BELIEVE_GOD    GLOBAL_COMMUNITY
 Min.   :1.000   Min.   :1.000   Min.   :1.000   
 1st Qu.:2.000   1st Qu.:2.000   1st Qu.:1.000   
 Median :3.000   Median :2.000   Median :1.000   
 Mean   :3.077   Mean   :1.957   Mean   :1.625   
 3rd Qu.:4.000   3rd Qu.:2.000   3rd Qu.:2.000   
 Max.   :9.000   Max.   :8.000   Max.   :8.000   
```

---

## Recoding data: You Try It!

* Look in the codebook to find the variable for **ECON_SIT** (note: it will be lower case in the codebook)

* Add recoding of **ECON_SIT** to the code below and run the code 

* Run the `summary()` code in the next code chunk to check your work






---

count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
* zap_labels()
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
* mutate(SEX = recode_factor(SEX,
*                            '1' = 'Male',
*                            '2' = 'Female'))
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
* mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
*                                   '1' = 'Men',
*                                   '2' = 'Women',
*                                   '3' = 'Same/both equally',
*                                   '8' = NA_character_,
*                                   '9' = NA_character_))
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
* mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
*                                      '1' = 'Satisfied',
*                                      '2' = 'Dissatisfied',
*                                      '8' = NA_character_,
*                                      '9' = NA_character_))
```
]
 
.panel2-you_try_key-auto[

]

---
count: false
 
## Answer to You Try It!
.panel1-you_try_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
  mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
                                       '1' = 'Satisfied',
                                       '2' = 'Dissatisfied',
                                       '8' = NA_character_,
                                       '9' = NA_character_)) %&gt;%
* mutate(ECON_SIT = recode_factor(ECON_SIT,
*                                 '1' = 'Very good',
*                                 '2' = 'Somewhat good',
*                                 '3' = 'Somewhat bad',
*                                 '4' = 'Very bad',
*                                 '8' = NA_character_,
*                                 '9' = NA_character_))
```
]
 
.panel2-you_try_key-auto[

]

&lt;style&gt;
.panel1-you_try_key-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-you_try_key-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-you_try_key-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Check your work: You Try It!

* If the code ran properly, you should expect to see the four categories listed under the `ECON_SIT` variable name

* If you do not see this, go back to your code and look for missing commas and other punctuation problems 


```r
summary(object = globalData2019clean)
```

```
     SEX           AGE                  BETTER_GENDER      COUNTRY_SATIS
 Male  :572   Min.   :18.00   Men              :448   Satisfied   :189  
 Female:423   1st Qu.:23.50   Women            :231   Dissatisfied:800  
              Median :30.00   Same/both equally:283   NA's        :  6  
              Mean   :32.38   NA's             : 33                     
              3rd Qu.:38.00                                             
              Max.   :98.00                                             
          ECON_SIT    BELIEVE_GOD    GLOBAL_COMMUNITY
 Very good    : 56   Min.   :1.000   Min.   :1.000   
 Somewhat good:259   1st Qu.:2.000   1st Qu.:1.000   
 Somewhat bad :266   Median :2.000   Median :1.000   
 Very bad     :406   Mean   :1.957   Mean   :1.625   
 NA's         :  8   3rd Qu.:2.000   3rd Qu.:2.000   
                     Max.   :8.000   Max.   :8.000   
```

---

## Try Some More! 

* Recode the last two categorical variables, `BELIEVE_GOD` and `GLOBAL_COMMUNITY` to have appropriate category labels and `NA` 

* Use the codebook to find the labels you need 

* Add to the existing code: 



---

## Check your work: Try Some More!


* If the code ran properly, you should expect to see the categories listed under the variable names

* If you do not see this, go back to your code and look for missing commas and other punctuation problems 


---

count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
*globalData2019clean &lt;- globalData2019
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
* filter(country == 21)
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
* select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
*        ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY)
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
* zap_labels()
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
* mutate(SEX = recode_factor(SEX,
*                            '1' = 'Male',
*                            '2' = 'Female'))
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
* mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
*                                   '1' = 'Men',
*                                   '2' = 'Women',
*                                   '3' = 'Same/both equally',
*                                   '8' = NA_character_,
*                                   '9' = NA_character_))
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
* mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
*                                      '1' = 'Satisfied',
*                                      '2' = 'Dissatisfied',
*                                      '8' = NA_character_,
*                                      '9' = NA_character_))
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
  mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
                                       '1' = 'Satisfied',
                                       '2' = 'Dissatisfied',
                                       '8' = NA_character_,
                                       '9' = NA_character_)) %&gt;%
* mutate(ECON_SIT = recode_factor(ECON_SIT,
*                                 '1' = 'Very good',
*                                 '2' = 'Somewhat good',
*                                 '3' = 'Somewhat bad',
*                                 '4' = 'Very bad',
*                                 '8' = NA_character_,
*                                 '9' = NA_character_))
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
  mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
                                       '1' = 'Satisfied',
                                       '2' = 'Dissatisfied',
                                       '8' = NA_character_,
                                       '9' = NA_character_)) %&gt;%
  mutate(ECON_SIT = recode_factor(ECON_SIT,
                                  '1' = 'Very good',
                                  '2' = 'Somewhat good',
                                  '3' = 'Somewhat bad',
                                  '4' = 'Very bad',
                                  '8' = NA_character_,
                                  '9' = NA_character_)) %&gt;%
* mutate(BELIEVE_GOD = recode_factor(BELIEVE_GOD,
*                                    '1' = 'It is not necessary to believe in God in order to be moral and have good values',
*                                    '2' = 'It is necessary to believe in God in order to be moral and have good values',
*                                    '8' = NA_character_,
*                                    '9' = NA_character_))
```
]
 
.panel2-try_more_key-auto[

]

---
count: false
 
## Answer to Try Some More!
.panel1-try_more_key-auto[

```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;%
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS,
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;%
  zap_labels() %&gt;%
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;%
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;%
  mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
                                       '1' = 'Satisfied',
                                       '2' = 'Dissatisfied',
                                       '8' = NA_character_,
                                       '9' = NA_character_)) %&gt;%
  mutate(ECON_SIT = recode_factor(ECON_SIT,
                                  '1' = 'Very good',
                                  '2' = 'Somewhat good',
                                  '3' = 'Somewhat bad',
                                  '4' = 'Very bad',
                                  '8' = NA_character_,
                                  '9' = NA_character_)) %&gt;%
  mutate(BELIEVE_GOD = recode_factor(BELIEVE_GOD,
                                     '1' = 'It is not necessary to believe in God in order to be moral and have good values',
                                     '2' = 'It is necessary to believe in God in order to be moral and have good values',
                                     '8' = NA_character_,
                                     '9' = NA_character_)) %&gt;%
* mutate(GLOBAL_COMMUNITY = recode_factor(GLOBAL_COMMUNITY,
*                                         '1' = 'Part of a global community that works together to solve problems',
*                                         '2' = 'Independent nations that compete with other countries and pursue their own interests',
*                                         '3' = 'Both',
*                                         '4' = 'Neither',
*                                         '8' = NA_character_,
*                                         '9' = NA_character_))
```
]
 
.panel2-try_more_key-auto[

]

&lt;style&gt;
.panel1-try_more_key-auto {
  color: black;
  width: 98%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-try_more_key-auto {
  color: black;
  width: 0%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-try_more_key-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---

## Check your work: Try Some More!


```r
summary(object = globalData2019clean)
```

```
     SEX           AGE                  BETTER_GENDER      COUNTRY_SATIS
 Male  :572   Min.   :18.00   Men              :448   Satisfied   :189  
 Female:423   1st Qu.:23.50   Women            :231   Dissatisfied:800  
              Median :30.00   Same/both equally:283   NA's        :  6  
              Mean   :32.38   NA's             : 33                     
              3rd Qu.:38.00                                             
              Max.   :98.00                                             
          ECON_SIT  
 Very good    : 56  
 Somewhat good:259  
 Somewhat bad :266  
 Very bad     :406  
 NA's         :  8  
                    
                                                                          BELIEVE_GOD 
 It is not necessary to believe in God in order to be moral and have good values: 73  
 It is necessary to believe in God in order to be moral and have good values    :917  
 NA's                                                                           :  5  
                                                                                      
                                                                                      
                                                                                      
                                                                             GLOBAL_COMMUNITY
 Part of a global community that works together to solve problems                    :626    
 Independent nations that compete with other countries and pursue their own interests:268    
 Both                                                                                : 69    
 Neither                                                                             :  2    
 NA's                                                                                : 30    
                                                                                             
```

---

## Final recoding for age


```r
globalData2019clean &lt;- globalData2019 %&gt;%
  filter(country == 21) %&gt;% 
  select(SEX, AGE, BETTER_GENDER, COUNTRY_SATIS, 
         ECON_SIT, BELIEVE_GOD, GLOBAL_COMMUNITY) %&gt;% 
  zap_labels() %&gt;%
  mutate(AGE = na_if(AGE, 98)) %&gt;% 
  mutate(SEX = recode_factor(SEX,
                             '1' = 'Male',
                             '2' = 'Female')) %&gt;% 
  mutate(BETTER_GENDER = recode_factor(BETTER_GENDER,
                                    '1' = 'Men',
                                    '2' = 'Women',
                                    '3' = 'Same/both equally',
                                    '8' = NA_character_,
                                    '9' = NA_character_)) %&gt;% 
  mutate(COUNTRY_SATIS = recode_factor(COUNTRY_SATIS,
                                       '1' = 'Satisfied',
                                       '2' = 'Dissatisfied',
                                       '8' = NA_character_,
                                       '9' = NA_character_)) %&gt;% 
  mutate(ECON_SIT = recode_factor(ECON_SIT,
                                  '1' = 'Very good',
                                  '2' = 'Somewhat good',
                                  '3' = 'Somewhat bad',
                                  '4' = 'Very bad',
                                  '8' = NA_character_,
                                  '9' = NA_character_)) %&gt;% 
  mutate(BELIEVE_GOD = recode_factor(BELIEVE_GOD,
                                     '1' = 'It is not necessary to believe in God in order to be moral and have good values',
                                     '2' = 'It is necessary to believe in God in order to be moral and have good values',
                                     '8' = NA_character_,
                                     '9' = NA_character_)) %&gt;% 
  mutate(GLOBAL_COMMUNITY = recode_factor(GLOBAL_COMMUNITY,
                                          '1' = 'Part of a global community that works together to solve problems',
                                          '2' = 'Independent nations that compete with other countries and pursue their own interests',
                                          '3' = 'Both',
                                          '4' = 'Neither',
                                          '8' = NA_character_,
                                          '9' = NA_character_)) 
```

---

## The end

* Email me at [harrisj@wustl.edu](mailto:harrisj@wustl.edu)

* Connect with me on Twitter [@jenineharris](https://twitter.com/jenineharris)




&lt;!-- adjust font size in this css code chunk, currently 80 --&gt;

&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 80%}

@media print {
  .has-continuation {
    display: block;
  }
}

code.r.hljs.remark-code{
  position: relative;
  overflow-x: hidden;
}


code.r.hljs.remark-code:hover{
  overflow-x:visible;
  width: 500px;
  border-style: solid;
}
&lt;/style&gt;




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
